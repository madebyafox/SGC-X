{
  "hash": "f461d2f0effe915cb11f5ed680d4a0cd",
  "result": {
    "markdown": "---\n# title: 'Response Scoring'\nsubtitle: 'Study SGC3A | 2 Response Scoring'\n# author: 'Amy Rae Fox'\n# always_allow_html: true  \n# header-includes:\n#    - \\usepackage{amsmath}\n# output:\n#   html_document:\n#     theme: yeti\n#     code_folding: hide\n#     fig_caption: yes\n#     number_sections: yes\n#     toc: yes\n#     toc_depth: 4\n#     toc_float:\n#       collapsed: no\n#       smooth_scroll: yes\n#   pdf_document: \n#     toc: true\n#     toc_depth: 3\n#     latex_engine: xelatex\n# font-family: \"DejaVu Sans\"\n# mainfont: \"DejaVu Sans\"\n---\n\n\\newpage\n\n# Response Scoring {#sec-SGC3A-scoring}\n\n::: {.cell}\n\n```{.r .cell-code}\n# knitr::opts_chunk$set(eval = FALSE) #knit w/o execution\noptions(scipen=1, digits=3)\n\nlibrary(tidyverse) #ALL THE THINGS\nlibrary(kableExtra) #printing tables \nlibrary(ggformula) #quick graphs\n```\n:::\n\n**THIS NOTEBOOK IS INCOMPLETE**\n\n*The purpose of this notebook is to score (assign a measure of accuracy) to response data for the SGC_3A study. This is required because the question type on the graph comprehension task used a 'Multiple Response' (MR) question design. Here, we evaluate different approaches to scoring multiple response questions, and transform raw item responses (e.g. boxes ABC are checked) to a measure of response accuracy. (Warning: this notebook takes several minutes to execute.)*\n\n| Pre-Requisite         | Followed By             |\n|-----------------------|-------------------------|\n| 1_sgc3a_harmonize.qmd | 3_sgc3A_exploration.qmd |\n\n## MULTIPLE RESPONSE SCORING\n\nThe *graph comprehension task* of study SGC 3A presents readers with a graph, a question, and a series of checkboxes. Participants are instructed to use the graph to answer the question, and respond by selecting all the checkboxes that apply, where each checkbox corresponds to a datapoint in the graph.\n\n![**Figure 1. Sample Graph Comprehension (Question \\# 6)**](static/img/sample_graphComprehensionTask.png)\n\nIn the psychology and education literatures on Tests & Measures, the format of this type of question is referred to as Multiple Response (MR), (also: Multiple Choice Multiple Answer (MCMA) and Multiple Answer Multiple Choice (MAMC)). It has a number of properties that make it different from traditional Single Answer Multiple Choice (SAMC) questions, where the respondent marks a single response from a number of options. In particular, there are a number of very different ways that MAMC questions can be *scored*.\n\nIn tranditional SAMC format questions, one point is given for selecting the option designated as correct, and zero points given for marking any of the alternative (i.e. distractor) options. Individual response options on MAMC questions, however might be partially correct ($i$), while responses on other answer options within the same item might be incorrect ($n – i$). In MR, it is not obvious how to allocate points when the respondent marks a true-correct option (i.e. options that *should* be selected, denoted $p$), as well as one or more false-correct options (i.e. options that *should not* be selected, denoted $q$). Should partial credit be awarded? If so, are options that respondents false-selected and false-unselected items equally penalized?\n\n@schmidtRelationExamineesTrue2021 performed a systematic literature review of publications proposing MAMC (or equivalent) scoring schemes, ultimately synthesizing over 80 sources into 27 distinct scoring approaches. Upon reviewing the benefits of trade-offs of each approach, for this study we choose utilize two of the schemes: **dichotomous scoring** ( @schmidtRelationExamineesTrue2021 scheme #1), and **partial scoring** $[-1/q,0, +1/p]$ ( @schmidtRelationExamineesTrue2021 scheme #26), as well as a scaled **discriminant score** that leverages partial scoring to discriminate between strategy-specific patterns of response.\n\n### Response Encoding\n\nFirst, we note that the question type evaluated by @schmidtRelationExamineesTrue2021 is referred to as *Multiple True-False* (MTF), a variant of MAMC where respondents are presented with a question (stem) and series of response options with True/False (e.g. radio buttons) for each. Depending on the implementation of the underlying instrument, it may or may not be possible for respondents to *not respond* to a particular option (i.e. leave the item 'blank'). Although MTF questions have a different underlying implementation (and potentially different psychometric properties) they are identical in their mathematical properties; that is, responses to a MAMC question of 'select all that apply' can be coded as a series of T/F responses to each response option\n\n![**Figure 2. SAMC (vs) MAMC (vs) MTF**](static/img/MAMC-MTF.png){#fig-ItemTypes}\n\nIn this example (@fig-ItemTypes), we see an example of a question with four response options ($n=4$) in each question type. In the **SAMC** approach (at left), there are four possible responses, given explicitly by the response options (respondent can select only one) $(\\text{number of possible responses} = n)$. With only four possible responses, we cannot entirely discriminate between all combinations of the underlying response variants we might be interested in, and must always choose an 'ideal subset' of possible distractors to present as response options. In the MAMC (middle) and MTF (at right), the *same number of response options* ($n=4$) yield a much greater number $(\\text{number of possible responses} = 2^{n})$. We can also see the equivalence between a MAMC and MTF format questions with the same response options. Options the respondent *selects* in MAMC are can be coded as T, and options they leave *unselected* can be coded as F. Thus, for response options (ABCD), a response of \\[AB\\] can also be encoded as \\[TTFF\\].\n\n### Scoring Schemes\n\nIn the sections that follow, we use the terminology:\n\n**Properties of the Stimulus-Question**\n\n$$\n\\begin{align}\nn &= \\text{number of response options} \\\\  \n  &= p + q \\\\ \n  p &= \\text{number of true-select options (i.e. should be selected)} \\\\\n  q &= \\text{number of true-unselect options (i.e. should not be selected)} \n\\end{align}\n$$\n\n**Properties of the Subject's Response**\n\n$$\n  \\begin{align} \ni &= \\text{number of options in correct state}, (0 ≤ i ≤ n) \\\\ \nf &= \\text{resulting score} \n\\end{align}\n$$\n\n#### Dichotomous Scoring {#sec-absolute-scoring}\n\n**Dichotomous Scoring** is the strictest scoring scheme, where a response only receives points if it is *exactly* correct, meaning the respondent includes *only correct-select* options, and does select any additional (i.e. incorrect-select) options that should not be selected. This is also known as *all or nothing scoring*, and importantly, it ignores any partial knowledge that a participant may be expressing through their choice of options. They may select some but not all of the correct-select options, and one or more but not all of the correct-unselect items, but receive the same score as a respondent selects none of the correct-select options, or all of the correct-unselect options. In this sense, dichotomous scoring tells us *only* about perfect knowledge, and ignores any indication of partial knowledge the respondent may be indicating through their selection of response options.\n\n**In Dichotomous Scoring**\n\n-   score for the question is either 0 or 1\n-   full credit is only given if all responses are correct; otherwise no credit\n-   does not account for *partial knowledge*. - with increasing number of response options, scoring becomes stricter as each statement must be marked correctly.\n\nThe algorithm for **dichotomous scoring** is given by:\n\n$$ \n\\begin{gather*}\nf = \n\\begin{cases}\n  1, \\text{if } i = n \\\\    \n  0, \\text{otherwise}    \n\\end{cases}\n\\end{gather*}\n\\tag{1}\n\\text{where } 0 \\le i \\le n\n$$\n\n::: {.cell}\n\n```{.r .cell-code}\nf_dichom <- function(i, n) {\n \n  # print(paste(\"i is :\",i,\" n is:\",n)) \n  \n  #if (n == 0 ) return error \n  ifelse( (n == 0), print(\"ERROR n can't be 0\"), \"\")\n  \n  #if (i > n ) return error \n  ifelse( (i > n), print(\"i n can't > n\"), \"\")\n  \n  #if (i==n) return 1, else 0\n  return (ifelse( (i==n), 1 , 0))\n \n}\n```\n:::\n\n#### Partial Scoring \\[-1/n, +1/n\\]\n\n**Partial Scoring** refers to a class or scoring schemes that award the respondent partial credit depending on pattern of options they select. @schmidtRelationExamineesTrue2021 identify twenty-six different partial credit scoring schemes in the literature, varying in the range of possible scores, and the relative weighting of incorrectly selected (vs) incorrectly unselected options.\n\nA particularly elegant approach to partial scoring is referred to as the $[-1/n, +1/n]$ approach ( @schmidtRelationExamineesTrue2021 #17). This approach is appealing in the context of SGC3A, because it: (1) takes into account all information provided by the respondent: the pattern of what the select, and choose not to select.\n\n**In Partial Scoring** $[-1/n, +1/n]$:\n\n-   Scores range from \\[-1, +1\\]\n-   One point is awarded if all options are *correct*\n-   One point point is subtracted if all options are *incorrect*.\n-   Intermediate results are credited as fractions accordingly ($+1/n$ for each correct, $-1/n$ for each incorrect)\n-   This results in *at chance performance* (i.e. half of the given options marked correctly), being awarded 0 points are awarded\n\nThis scoring is more consistent with the motivating theory that Triangular Graph readers start out with an incorrect (i.e. orthogonal, cartesian) interpretation of the coordinate system, and transition to a correct (i.e. triangular) interpretation. But the first step in making this transition is realizing the cartesian interpretation *is incorrect*, which may yield blank responses where the respondent is essentially saying, 'there is no correct answer to this question'.\n\n@schmidtRelationExamineesTrue2021 describe the *Partial* ${[-1/n, +1/n]}$ scoring scheme as the *only* scoring method (of the 27 described) where respondents' scoring results can be interpreted as a percentage of their true knowledge. One important drawback of this method is that a respondent may receive credit (a great deal of credit, depending on the number of answer options n) even if she did not select *any* options. In the case (such as ours) where there are many more response options $n$ than there are options meant to be selected $p$, this partial scoring algorithm poses a challenge because the respondent can achieve an almost completely perfect score by selecting a small number of options that should not be selected.\n\nThe algorithm for **partial scoring**$[-1/n, +1/n]$ is given by:\n\n$$\n  \\begin{align}\nf &= (1/n * i) - (1/n * (n-i)) \\\\\n&= (2i - n)/{n} \n\\tag{2}\n\\end{align}\n$$\n\n::: {.cell}\n\n```{.r .cell-code}\nf_partialN <- function(i, n) {\n\n# print(paste(\"i is :\",i,\" n is:\",n))\n\n#if(n==0) return error\nifelse((n==0),print(\"ERROR: n should not be 0\"),\"\")\n\n#if(i >n ) return error\nifelse((i > n),print(\"ERROR: i CANNOT BE GREATER THAN n\"),\"\")\n\nreturn ((2*i - n) / n) \n}\n```\n:::\n\n#### Partial Scoring \\[-1/p, +1/p\\]\n\nOne drawback of the Partial Scoring $[-1/n, +1/n]$ approach is that treats the choice to select, and choice to not select options as equally indicative of the respondent's understanding. That is to say, incorrectly selecting one particular option is no more or less informative than incorrectly not-selecting a different item. This represents an important difference between MAMC (i.e. \"select all correct options\") vs MTF (i.e. \"Mark each option as true or false\") questions.\n\nIn our study, the selection of any particular option (remember options represent data points on the stimulus graph) is indicative of a particular interpretation of the stimulus. Incorrectly selecting an option indicates an interpretation of the graph with respect to that particular option. Alternatively, failing to select a correct option *might* mean the individual has a different interpretation, or that they failed to find *all* the data points consistent with the interpretation.\n\nFor this reason, we consider another alternative Partial Scoring scheme that takes into consideration only the selected statements, without penalizing statements incorrectly *not selected*. (See @schmidtRelationExamineesTrue2021 method #26; also referred to as the Morgan-Method) This partial scoring scheme takes into consideration that the most effort-free (or 'default') response for any given item is the null, or blank response. Blank responses indicate *no understanding*, perhaps *confusion*, or refusal to answer. These lack of responses are awarded zero credit. Whereas taking the action to select an *incorrect* option is effortful, and is indicative of *incorrect understanding*.\n\n**Partial Scoring** $[-1/q, +1/p]$:\n\n-   awards +1/p for each correctly selected option ($p_s$), and subtracts $1/(n-p) = 1/q$ for each incorrectly selected option ($q_s$)\n-   only considers *selected* options; does not penalize nor reward *unselected* options\n\n**Properties of Item**\n\n$$\n\\begin{align}\np &= \\text{number of true-select options (i.e. should be selected)} \\\\\nq &= \\text{number of true-unselect options (i.e. should not be selected)} \\\\\nn &= \\text{number of options} \\: ( n = p + q)\n\\end{align}\n$$\n\n**Properties of Response**\n\n$$\n\\begin{align}\np_s &= \\text{number of true-select options selected (i.e. number of correctly checked options)}\\\\\nq_s &= \\text{number of true-unselect options selected (i.e. number of incorrectly checked options }\n\\end{align}\n$$\n\nThe algorithm for **partial scoring** $[-1/q, +1/p]$ is given by:\n\n$$\n\\begin{align}\nf &= (p_m / p) - ({q_m}/{q}) \\\\\n\\tag{3}\n\\end{align}\n$$\n\n::: {.cell}\n\n```{.r .cell-code}\nf_partialP <- function(t,p,f,q) {\n\n  #t = number of correct-selected options\n  #p = number of true options\n  #f = number of incorrect-selected options\n  #q = number of false options\n  #n = number of options + p + q\n  return( (t / p) - (f/q))\n}\n```\n:::\n\n#### Comparison of Schemes\n\nWhich scoring scheme is most appropriate for the goals of the graph comprehension task?\n\nConsider the following example:\n\n*For a question with* $n = 5$ response options (data points A, B, C, D and E) with a correct response of A, the schemes under consideration yield the following scores:\n\n::: {.cell}\n\n```{.r .cell-code}\ntitle <- \"Comparison of Scoring Schemes for n = 5 options [ A,B,C,D,E ]\"\n\ncorrect <- c( \"A____\",  \n              \"A____\",      \n              \"A____\",        \n              \"A____\",        \n              \"A____\",      \n              \"A____\",      \n              \"A____\",      \n              \"A____\",      \n              \"A____\" ) \n\nresponse <- c(\"A____\",  \n              \"AB___\",      \n              \"A___E\",      \n              \"AB__E\",        \n              \"____E\",\n              \"___DE\",\n              \"_BCDE\",      \n              \"ABCDE\",      \n              \"_____\" )\n\ni <- c(        5,       \n               4,              \n               4,              \n               3,               \n               \n               3,\n               2,\n               0,\n               1,\n               4)\n\nabs <- c(f_dichom(5,5), \n         f_dichom(4,5), \n         f_dichom(4,5), \n         f_dichom(3,5), \n         \n         f_dichom(3,5), \n         f_dichom(2,5),\n         f_dichom(0,5),\n         f_dichom(1,5),\n         f_dichom(4,5))\n\npartial1 <- c(f_partialN(5,5), \n              f_partialN(4,5), \n              f_partialN(4,5), \n              f_partialN(3,5), \n              \n              f_partialN(3,5), \n              f_partialN(2,5),\n              f_partialN(0,5),\n              f_partialN(1,5),\n              f_partialN(4,5))\n\npartial2 <- c(f_partialP(1,1,0,4), \n              f_partialP(1,1,1,4), \n              f_partialP(1,1,1,4), \n              f_partialP(1,1,2,4), \n              \n              f_partialP(0,1,1,4),\n              f_partialP(0,1,2,4),\n              f_partialP(0,1,4,4),\n              f_partialP(1,1,4,4), \n              f_partialP(0,1,0,4))\n\nnames = c(    \"Correct Answer\",\n              \"Response\",\n              \"i \",\n              \"Dichotomous\",\n              \"Partial [-1/n, +1/n]\",\n              \"Partial[-1/q, +1/p]\")\n\ndt <- data.frame(correct, response, i, abs, partial1 , partial2)\n\nkbl(dt, col.names = names, caption = title, digits=3) %>%\n  kable_classic() %>%\n    add_header_above(c(\"Response Scenario \" = 3, \"Scores\" = 3)) %>% \n    pack_rows(\"Perfect Response\", 1, 1) %>%\n    pack_rows(\"Correct + Extra Incorrect Selections\", 2, 4) %>%\n    pack_rows(\"Only Incorrect Selections\", 5, 6) %>%\n    pack_rows(\"Completely Inverse Response \", 7, 7) %>%\n    pack_rows(\"Selected ALL or NONE\", 8, 9) %>%\n    footnote(general = paste(\"i = number of options in correct state; _ indicates option not selected\"),\n           general_title = \"Note: \",footnote_as_chunk = T)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;border-bottom: 0;'>\n<caption>Comparison of Scoring Schemes for n = 5 options [ A,B,C,D,E ]</caption>\n <thead>\n<tr>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"3\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Response Scenario </div></th>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"3\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Scores</div></th>\n</tr>\n  <tr>\n   <th style=\"text-align:left;\"> Correct Answer </th>\n   <th style=\"text-align:left;\"> Response </th>\n   <th style=\"text-align:right;\"> i  </th>\n   <th style=\"text-align:right;\"> Dichotomous </th>\n   <th style=\"text-align:right;\"> Partial [-1/n, +1/n] </th>\n   <th style=\"text-align:right;\"> Partial[-1/q, +1/p] </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"1\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Perfect Response</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> A____ </td>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\"> 1.00 </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Correct + Extra Incorrect Selections</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> AB___ </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.6 </td>\n   <td style=\"text-align:right;\"> 0.75 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> A___E </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.6 </td>\n   <td style=\"text-align:right;\"> 0.75 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> AB__E </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:right;\"> 0.50 </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Only Incorrect Selections</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> ____E </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:right;\"> -0.25 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> ___DE </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.2 </td>\n   <td style=\"text-align:right;\"> -0.50 </td>\n  </tr>\n  <tr grouplength=\"1\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Completely Inverse Response </strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> _BCDE </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -1.0 </td>\n   <td style=\"text-align:right;\"> -1.00 </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Selected ALL or NONE</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> ABCDE </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.6 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> _____ </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.6 </td>\n   <td style=\"text-align:right;\"> 0.00 </td>\n  </tr>\n</tbody>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<span style=\"font-style: italic;\">Note: </span> <sup></sup> i = number of options in correct state; _ indicates option not selected</td></tr></tfoot>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\n#cleanup\nrm(dt)\n```\n:::\n\n-   We see that in the Dichotomous scheme, only the precisely correct response (row 1) yields a score other than zero. This scheme does now allow us to differentiate between different response patters.\n\n-   The Partial $[-1/n, +1/n]$ scheme yields a range from $[-1,1]$, differentiating between responses. However, a blank response (bottom row) receives the same score (0.6) as the selection of the correct option + 1 incorrect option (row 2), which is problematic with for the goals of this study, where we need to differentiate between states of confusion or uncertainty yielding blank responses and the intentional selection of incorrect items.\n\n-   The Partial $[-1/q, +1/p]$ scheme also yields a range of scores from $[-1,1]$. A blank response (bottom row) yields the same score ($0$) as the selection of *all* answer options (row 7); both are patterns of behavior we would expect to see if a respondent is confused or uncertain that there is a correct answer to the question.\n\nNext we consider an example from our study, with $n = 15$ options and $p = 1$ correct option to be selected.\n\n::: {.cell}\n\n```{.r .cell-code}\ntitle <- \"Comparison of Scoring Schemes for SGC3 with n=15 and p=1 options [A,B...N,O]  \"\n\ncorrect <- c( \"A____\",  \n              \"A____\",      \n              \"A____\",      \n              \"A____\",        \n              \"A____\",      \n              \"A____\",      \n              \"A____\",      \n              \"A____\",      \n              \"A____\" ) \n\nresponse <- c(\"A__...__\",  \n              \"AB_...__\",      \n              \"A__..._O\",      \n              \"AB_..._O\",        \n              \"___..._O\",      \n              \"___...NO\",      \n              \"_BC...NO\",\n              \"ABC...NO\",      \n              \"___...__\" )\n\ni <- c(        15,       \n               14,              \n               14,              \n               13,\n               13,               \n               12,          \n               0,\n               1,\n               14)\n\nabs <- c(f_dichom(15,15), \n         f_dichom(14,15), \n         f_dichom(14,15), \n         f_dichom(13,15), \n         f_dichom(13,15),\n         f_dichom(12,15),\n         f_dichom(0,15),\n         f_dichom(1,15),\n         f_dichom(14,15))\n\npartial1 <- c(f_partialN(15,15), \n              f_partialN(14,15), \n              f_partialN(14,15), \n              f_partialN(13,15), \n              f_partialN(13,15),\n              f_partialN(12,15),\n              f_partialN(0,15),\n              f_partialN(1,15),\n              f_partialN(14,15))\n\npartial2 <- c(f_partialP(1,1,0,14), \n              f_partialP(1,1,1,14), \n              f_partialP(1,1,1,14), \n              f_partialP(1,1,2,14), \n              f_partialP(0,1,1,14),\n              f_partialP(0,1,2,14),\n              f_partialP(0,1,14,14),\n              f_partialP(1,1,14,14), \n              f_partialP(0,1,0,14))\n\nnames = c(    \"Correct Answer\",\n              \"Response\",\n              \"$i$ \",\n              \"Dichotomous\",\n              \"Partial [-1/n, +1/n]\",\n              \"Partial [-1/q, +1/p]\")\n\ndt <- data.frame(correct, response, i, abs, partial1 , partial2)\n\nkbl(dt, col.names = names, caption = title, digits=3) %>%\n  kable_classic() %>%\n    add_header_above(c(\"Response Scenario \" = 3, \"Scores\" = 3)) %>% \n    pack_rows(\"Perfect Response\", 1, 1) %>%\n    pack_rows(\"Correct + Extra Incorrect Selections\", 2, 4) %>%\n    pack_rows(\"Only Incorrect Selections\", 5, 6) %>%\n    pack_rows(\"Completely Inverse Response \", 7, 7) %>%\n    pack_rows(\"Selected ALL or NONE\", 8, 9) %>%\n    footnote(general = paste(\"i = number of options in correct state; _ indicates option not selected\"),\n           general_title = \"Note: \",footnote_as_chunk = T)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;border-bottom: 0;'>\n<caption>Comparison of Scoring Schemes for SGC3 with n=15 and p=1 options [A,B...N,O]  </caption>\n <thead>\n<tr>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"3\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Response Scenario </div></th>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"3\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Scores</div></th>\n</tr>\n  <tr>\n   <th style=\"text-align:left;\"> Correct Answer </th>\n   <th style=\"text-align:left;\"> Response </th>\n   <th style=\"text-align:right;\"> $i$  </th>\n   <th style=\"text-align:right;\"> Dichotomous </th>\n   <th style=\"text-align:right;\"> Partial [-1/n, +1/n] </th>\n   <th style=\"text-align:right;\"> Partial [-1/q, +1/p] </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"1\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Perfect Response</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> A__...__ </td>\n   <td style=\"text-align:right;\"> 15 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Correct + Extra Incorrect Selections</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> AB_...__ </td>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.867 </td>\n   <td style=\"text-align:right;\"> 0.929 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> A__..._O </td>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.867 </td>\n   <td style=\"text-align:right;\"> 0.929 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> AB_..._O </td>\n   <td style=\"text-align:right;\"> 13 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.733 </td>\n   <td style=\"text-align:right;\"> 0.857 </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Only Incorrect Selections</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> ___..._O </td>\n   <td style=\"text-align:right;\"> 13 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.733 </td>\n   <td style=\"text-align:right;\"> -0.071 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> ___...NO </td>\n   <td style=\"text-align:right;\"> 12 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.600 </td>\n   <td style=\"text-align:right;\"> -0.143 </td>\n  </tr>\n  <tr grouplength=\"1\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Completely Inverse Response </strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> _BC...NO </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -1.000 </td>\n   <td style=\"text-align:right;\"> -1.000 </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Selected ALL or NONE</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> ABC...NO </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.867 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A____ </td>\n   <td style=\"text-align:left;\"> ___...__ </td>\n   <td style=\"text-align:right;\"> 14 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.867 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n  </tr>\n</tbody>\n<tfoot><tr><td style=\"padding: 0; \" colspan=\"100%\">\n<span style=\"font-style: italic;\">Note: </span> <sup></sup> i = number of options in correct state; _ indicates option not selected</td></tr></tfoot>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\n#cleanup\nrm(dt, abs,correct,i,names,partial1,partial2,response,title)\n```\n:::\n\nHere again we see that the Partial $[-1/q, +1/p]$ scheme allows us differentiate between patterns of responses, in a way that is more sensible for the goals of the SGC3 graph comprehension task.\n\n::: {.callout-caption appearance=\"simple\" icon=\"false\"}\n## Decision\n\nThe Partial $[-1/q, +1/p]$ scheme is more appropriate for scoring the graph comprehension task than the Partial $[-1/n, +1/n]$ scheme because it allows us to differentially penalize incorrectly *selected* and incorrectly *not selected* answer options.\n:::\n\n### TODO A Discriminant Score\n\nThough it appears the Partial $[-1/q, +1/p]$ scheme is a more appropriate scoring method for differentiating between meaningful patterns of responses, it does have one significant limitation: it treats all incorrectly selected answer options in the same way.\n\nIn the case of the SGC study paradigm, the choice of which options the subject selects reveals important information about their understanding of the graph stimulus. Specifically, there are certain patterns of options that correspond to a *triangular* versus *orthogonal* interpretations. In the previous example, rows 2 and 3 both indicate a subject has selected the correct option (A) plus one additional option (B or O). Both responses receive the same score under $[-1/q, +1/q]$. These two responses may be very meaningfully different, however if one of the alternate options chosen indicates a different interpretation of the stimulus. The inclusion of data-point B might be reasonable under some degree of visual tracing error, while the inclusion of data-point O might indicate a cartesian misinterpretation of the coordinate system. Essentially, some answer options are *more incorrect* than others. We want to be able to differentiate between these responses.\n\nTo accomplish this task, we need to sets of interpretation-consistent options for each item. Based on our prior work, we define **four interpretations** for which to define options. We can think of these as four different answer keys, each defining the set of 'correct' options (those that should be selected) under each interpretation of the graph.\n\n1.  Triangular : the (true, actually correct) triangular interpretation of the coordinate system; indicated by data points intersecting the appropriate diagonal projection from the x-axis.\n2.  Orthogonal: the (incorrect but most common) cartesian interpretation of the coordinate system; indicated by data points intersecting an (invisible) orthogonal projection from the x-axis.\n3.  Lines-Connect: an (incorrect) interpretation that is partially-triangular, insofar as it is indicated by data points intersecting any diagonal projection from the x-axis (not necessarily the *correct* projection).\n4.  Satisficing: an (incorrect) interpretation that indicated by selecting the data points nearest to the (invisible) orthogonal projection from the x-axis; indicates an orthogonal interpretation in absence of an available orthogonal intersect.\n\nTODO FIX THIS SECTION ONWARDS ... RESPONSE SETS NEED NOT BE MUTUTALLY EXCLUSIVE\n\nThus for *each* item, in the graph comprehension task, we will define five sets, whose members constitute a partition of the set of answer options.\n\n$$\n\\begin{align}\nQ &= \\text{the (universal) set of all answer options } \\\\\n\\\\\nT &=  \\{o:o \\:is\\:triangular  \\}, |T| \\ne 0  \\\\\nR &=  \\{o:o \\:is\\:orthogonal \\} \\\\\nL &=  \\{o:o \\:is\\:line-connecting \\} \\\\\nS &=  \\{o:o \\:is\\:satisficing \\} \\\\\n\\\\\n\\emptyset &= T \\cap R \\cap L \\cap S  \\: \\text{(the interpretation sets are disjoint)}\\\\\nD &= Q - \\{T \\cup R \\cup L \\cup S \\} , \\text{(distractors; the remaining options not consistent with any interpretation})\n\\\\\n\\end{align}\n$$\n\nFor example, for the following sample stimuli, TODO IMAGE\n\n$$\n\\begin{align}\nQ &= \\{a, b, c, d, e, f, g \\} \\\\\n  &= \\{ \\{a \\}\\}, \\{b\\}, \\{c,d\\}, \\{e\\},  \\{f,g\\}\\} \\\\\n\\\\\nT &= \\{ a \\} \\\\\nR &= \\{ b \\} \\\\\nL &= \\{ c,d \\} \\\\\nS &= \\{ e \\} \\\\\nD &= \\{ f, g\\} \\\\\n\\end{align}\n$$\n\nTo capture this important source of variation, we can apply the idea behind the partial scoring $[-1/q, +1/p]$ scheme in combination with the response option subgroups given by the graph interpretations to produce a single score (scaled from $-1$ to $+1$) that captures the *nature* of the respondent's partial knowledge.\n\nA **Discriminant Score** will offer:\n\n-   +1 for a complete triangular response\n-   -1 for a complete orthogonal response\n-   +/- fraction of complete triangular or orthogonal response\n-   0 for non-strategy responses\n-   0 for blank (empty) responses\n\n$$\n  \\begin{align}\n\\text{Score}_{discriminant} &= 0 + 1*(t_s / t) - 1 * (r_s / r) + 0*(d_s / d) \\\\\n&= (t_s / t) - (r_s / r) \n\\tag{4}\n\\end{align}\n$$\n\nWhere:\n\n-   $t = |T| =$ number of triangular-correct options (consistent with triangular interpretation), $t \\gt 0$\n-   $r = |R| =$ number of orthogonal-correct options (consistent with orthogonal interpretation), $t \\gt 0$\n-   $d$ = number of non-strategy options (not consistent with either interpretation), $t \\gt 0$\n-   $n$ = total number of response options (equals the number of checkboxes in the question; equals the number of data points in the stimulus graph)\n-   $n = t + r + d$ (15 for scaffold phase, 18 for test phase)\n-   $t_s$ = number of triangular-correct options selected, $t_s \\ge 0$\n-   $r_s$ = number of orthogonal-correct options selected, $r_s \\ge 0$\n-   $d_s$ = number of non-strategy options options selected, $d_s \\ge 0$\n-   $s$ = number of options selected, $s \\ge 0$\n-   $s = t_s + r_s + d_s$\n\nTODO:: add 0.5*(tversky) - 0.5*(satisficing)\n\n::: {.cell}\n\n```{.r .cell-code}\nf_discrim <- function(t_s,t,r_s,r){\n  return((t_s / t) - (r_s / r))\n}\n```\n:::\n\n## \n\n## SCORE SGC DATA\n\nIn SGC_3A we are fundamentally interested in understanding how a participant interprets the presented graph (stimulus). The graph comprehensiontask asks them to select the data points in the graph that meet the criteria posed in the question. To assess a participant's performance, for each question (q=15) we will calculate the following scores:\n\n*An overall, strict score:*\\\n1. **Absolute Score** : using dichotomous scoring referencing true (Triangular) answer. (see 1.2)\n\n*Sub-scores, for each alternative graph interpretation*\\\n2. **Triangular Score** : using partial scoring \\[-1/q, +1/p\\] referencing true (Triangular) answer key.\n\n3\\. **Orthogonal Score** : using partial scoring \\[-1/q, +1/p\\] referencing (incorrect Orthogonal) answer key.\n\n4\\. **Tversky Score** : using partial scoring \\[-1/q, +1/p\\] referencing (incorrect connecting-lines strategy) answer key.\n\n5\\. **Satisficing Score** : using partial scoring \\[-1/q, +1/p\\] referencing (incorrect satisficing stategy) answer key.\n\n### Prepare Answer Keys\n\nWe start by importing the answer keys for each stimulus set. For each stimulus set (defined by condition+task phase) an answer key file exist that defines the set of response options that indicate each graph interpretation.\n\n::: {.cell}\n\n```{.r .cell-code}\nkey_111_raw <- read_csv('keys/SGC3A_scaffold_111_key.csv') %>% mutate(condition = 111, phase = \"scaffold\")\nkey_121_raw <- read_csv('keys/SGC3A_scaffold_121_key.csv')%>% mutate(condition = 121, phase = \"scaffold\")\nkey_test_raw <- read_csv('keys/SGC3A_test_key.csv')%>% mutate(condition = \"\", phase = \"test\")\n\nkeys_raw <- rbind(key_111_raw, key_121_raw, key_test_raw)\nrm(key_111_raw, key_121_raw, key_test_raw)\n```\n:::\n\nIn order to calculate scores using the $[-1/q, +1/p]$ algorithm, we need to define the subset of all response options (set N) that should be selected (set P) and should not be selected (set Q). In order to calculate subscores for each graph interpretation (triangular, orthogonal) we must define these sets independently for each interpretation. The answer key files the 'correct' answer (i.e. set P) for each interpretation, for each question. We must derive the contents of set Q based on set\n\n-   SET N = all response options (superset) $N$\n\n-   SET P = all options that should be selected (rewarded as +1/p) $P \\subset N$\n\n-   SET A = items that should not be selected, but if they are, don't penalize (ignored) $A \\subset N$\n\n-   SET Q = all options that should NOT be selected (penalized as -1/q) $Q = N - (P \\cup A)$\n\n::: {.cell}\n\n```{.r .cell-code}\nverify = c() #sanity check\n\n##——————————————————————————————————————————————————————————————————————\n##CONSTRUCT ORTHOGONAL KEY SET\n##——————————————————————————————————————————————————————————————————————\n#1. DEFINE SETS N, P, A\nkeys_orth <- keys_raw %>% \n  select(Q, condition, OPTIONS, ORTHOGONAL, ORTHve, ALSO, TRIANGULAR) %>% \n  mutate(\n    \n    #replace NAs \n    ORTHve = str_replace_na(ORTHve,\"\"),\n    ALSO = str_replace_na(ALSO,\"\"),\n    \n    #P options that SHOULD be selected (rewarded)\n    set_p = ORTHOGONAL,\n    n_p = nchar(set_p), #number of true-select options\n    \n    #A options that are ignored if selected \n    set_a = str_c(ORTHve,ALSO, sep=\"\"),\n    n_a = nchar(set_a),\n    \n    #N store all answr options (superset)\n    set_n = OPTIONS,  \n    n_n = nchar(set_n)\n  \n) %>% select(Q, condition, set_n, set_p, set_a, n_n, n_p, n_a)\n\n#2. DEFINE SETS N, P, A\nfor (x in 1:nrow(keys_orth)) {\n  \n  #UNWIND STRINGS FOR SETDIFF\n  #n all answer options\n  N = keys_orth[x,'set_n'] %>% pull(set_n) %>% strsplit(\"\") %>% unlist()\n  #p correct-select answer options\n  P = keys_orth[x,'set_p'] %>% pull(set_p) %>% strsplit(\"\") %>% unlist()\n  #a ignore-select answer options (should not be selected, but if they are, don't penalize)\n  A = keys_orth[x,'set_a'] %>% pull(set_a) %>% strsplit(\"\") %>% unlist()\n  \n  #Q = N - (P+A)\n  #answers that are penalized (at -1/q) if selected \n  s = union(P,A) #rewarded plus ignored \n  # s = union(s,X) # + trapdoor \n  Q = setdiff(N,s) # = penalized at -1/q when selected \n  \n  #save set to dataframe\n  Q = str_c(Q, collapse=\"\")\n  n_q = nchar(Q)\n  keys_orth[x,'set_q'] = Q\n  keys_orth[x,'n_q'] = n_q\n  \n  #verify each element in N is included in one and only one of P,A,Q\n  tempunion = union(s,Q) %>% str_c(collapse=\"\") %>% strsplit(\"\") %>% unlist()\n  N = N %>% str_c(collapse=\"\") %>% strsplit(\"\") %>% unlist()\n  verify[x] = setequal(tempunion,N)\n}\n\n#3. reorder cols for ease of use\nkeys_orth <- keys_orth %>% select(Q, condition, set_n, set_p, set_a, set_q, n_n, n_p, n_a, n_q) %>% mutate(verify = n_p + n_a + n_q)\n\n\n##——————————————————————————————————————————————————————————————————————\n##CONSTRUCT TRIANGULAR KEY SET\n##——————————————————————————————————————————————————————————————————————\n#1. DEFINE SETS N, P, A\nkeys_tri <- keys_raw %>% \n  select(Q, condition, OPTIONS, TRIANGULAR, TRIve, ALSO, ORTHOGONAL) %>% \n  mutate(\n    \n    #replace NAs \n    TRIve = str_replace_na(TRIve,\"\"),\n    ALSO = str_replace_na(ALSO,\"\"),\n    \n    #P options that SHOULD be selected (rewarded)\n    set_p = TRIANGULAR,\n    n_p = nchar(set_p), #number of true-select options\n    \n    #A options that are ignored if selected \n    set_a = str_c(TRIve,ALSO, sep=\"\"),\n    n_a = nchar(set_a),\n    \n    #N store all answr options (superset)\n    set_n = OPTIONS,  \n    n_n = nchar(set_n)\n  \n) %>% select(Q, condition, set_n, set_p, set_a, n_n, n_p, n_a)\n\n#2. DEFINE SETS N, P, A\nfor (x in 1:nrow(keys_tri)) {\n  \n  #UNWIND STRINGS FOR SETDIFF\n  #n all answer options\n  N = keys_tri[x,'set_n'] %>% pull(set_n) %>% strsplit(\"\") %>% unlist()\n  #p correct-select answer options\n  P = keys_tri[x,'set_p'] %>% pull(set_p) %>% strsplit(\"\") %>% unlist()\n  #a ignore-select answer options (should not be selected, but if they are, don't penalize)\n  A = keys_tri[x,'set_a'] %>% pull(set_a) %>% strsplit(\"\") %>% unlist()\n  \n  #Q = N - (P+A)\n  #answers that are penalized (at -1/q) if selected \n  s = union(P,A) #rewarded plus ignored \n  # s = union(s,X) # + trapdoor \n  Q = setdiff(N,s) # = penalized at -1/q when selected \n  \n  #save set to dataframe\n  Q = str_c(Q, collapse=\"\")\n  n_q = nchar(Q)\n  keys_tri[x,'set_q'] = Q\n  keys_tri[x,'n_q'] = n_q\n  \n  #verify each element in N is included in one and only one of P,A,Q\n  tempunion = union(s,Q) %>% str_c(collapse=\"\") %>% strsplit(\"\") %>% unlist()\n  N = N %>% str_c(collapse=\"\") %>% strsplit(\"\") %>% unlist()\n  verify[x] = setequal(tempunion,N)\n}\n\n#3. reorder cols for ease of use\nkeys_tri <- keys_tri %>% select(Q, condition, set_n, set_p, set_a, set_q, n_n, n_p, n_a, n_q) %>% mutate(verify = n_p + n_a + n_q)\n\n#cleanup \nrm(N,A,P,Q,n_q,s,x,tempunion)\n```\n:::\n\nThis leaves us with two dataframes `keys_orth` and `keys_tri` that define the sets of response options consistent with each graph interpretation\n\nTo verify we have generated the correct sets, we verify that for each row (question), each response in N is included in either set P, A or Q (once and only once).\n\nTRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, FALSE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE \\*\\*TODO TROUBLESHOOT FALSE; THINK THIS IS BECAUSE KEY FILE IS INCOMPLETE FOR ALL BUT RAW 111\n\n### Score Items\n\nNext, we import the item-level response data. For each row in the item level dataset (indicating the response to a single question-item for a single subject), we compare the raw response `df_items$response` with the answer keys in each interpretation (keys_orth, keys_tri), then using those sets, determine the number of correctly selected items(p) and incorrectly selected items (q), which in turn are used to calculate partial\\[-1/q, +1/p\\] scores for each interpretation. The resulting scores are then stored on each item, and can be used to determine which graph interpretation the subject held.\\\n`score_TRI` (how triangular was the subject's response?) `score_ORTH`(how orthogonal was the subject's response)\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_items <- read_rds('data/sgc3a_items.rds')\ndf_items <- df_items %>% filter(q < 6) %>% filter(condition == 111)\n```\n:::\n\n*note: this cell takes approximately 3 minutes to run*\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n##———————————————————————————————————————————————————————————————\n##CALCULATE P AND Q for ORTH AND TRI\n##———————————————————————————————————————————————————————————————\n#for each response (row), calculate p_s and q_s for that question\nfor (x in 1:nrow(df_items)) {\n\n  #get properties of the RESPONSE ITEM\n  qu = df_items[x,'q']\n  cond = df_items[x,'condition']\n  r = df_items[x,'response'] %>% str_split(\"\") %>% unlist()\n  \n  #get KEYS for this question for this condition\n  if (qu < 6) { \n    \n    #get triangular keys\n    tri_p = keys_tri %>% filter(Q == qu) %>% filter(condition == cond) %>% select(set_p) %>% pull(set_p) %>% str_split(\"\") %>% unlist()\n    tri_q = keys_tri %>% filter(Q == qu) %>% filter(condition == cond) %>% select(set_q) %>% pull(set_q) %>% str_split(\"\") %>% unlist()\n    tri_pn = keys_tri %>% filter(Q == qu) %>% filter(condition == cond) %>% select(n_p)\n    tri_qn = keys_tri %>% filter(Q == qu) %>% filter(condition == cond) %>% select(n_q)\n    \n    #get orthogonal keys\n     orth_p = keys_orth %>% filter(Q == qu) %>% filter(condition == cond) %>% select(set_p) %>% pull(set_p) %>% str_split(\"\") %>% unlist()\n     orth_q = keys_orth %>% filter(Q == qu) %>% filter(condition == cond) %>% select(set_q) %>% pull(set_q) %>% str_split(\"\") %>% unlist()\n     orth_pn = keys_orth %>% filter(Q == qu) %>% filter(condition == cond) %>% select(n_p)\n     orth_qn = keys_orth %>% filter(Q == qu) %>% filter(condition == cond) %>% select(n_q)\n    \n  } else {\n    \n    #get triangular keys\n    tri_p = keys_tri %>% filter(Q == qu) %>% select(set_p) %>% pull(set_p) %>% str_split(\"\") %>% unlist()\n    tri_q = keys_tri %>% filter(Q == qu) %>% select(set_q) %>% pull(set_q) %>% str_split(\"\") %>% unlist()\n    tri_pn = keys_tri %>% filter(Q == qu)  %>% select(n_p)\n    tri_qn = keys_tri %>% filter(Q == qu)  %>% select(n_q)\n    \n    #get orthogonal keys\n    orth_p = keys_orth %>% filter(Q == qu) %>% select(set_p) %>% pull(set_p) %>% str_split(\"\") %>% unlist()\n    orth_q = keys_orth %>% filter(Q == qu) %>% select(set_q) %>% pull(set_q) %>% str_split(\"\") %>% unlist()\n    orth_pn = keys_orth %>% filter(Q == qu) %>% select(n_p)\n    orth_qn = keys_orth %>% filter(Q == qu) %>% select(n_q)\n  }\n  \n  #calculate and save qs and ps\n  tri_ps = length(intersect(r,tri_p))\n  tri_qs = length(intersect(r,tri_q))\n  orth_ps = length(intersect(r,orth_p))\n  orth_qs = length(intersect(r,orth_q))\n  \n  df_items[x,'tri_ps'] = tri_ps\n  df_items[x,'tri_qs'] = tri_qs\n  df_items[x,'orth_ps'] = orth_ps\n  df_items[x,'orth_qs'] = orth_qs\n \n  #calculate subscores\n  # f_partialP <- function(t,p,f,q) \n  df_items[x,'score_TRI'] = f_partialP(tri_ps,tri_pn,tri_qs,tri_qn)\n  df_items[x,'score_ORTH'] = f_partialP(orth_ps,orth_pn,orth_qs,orth_qn)\n}\n\n#ALSO recast absolute score as integer based on boolean 'correct\ndf_items$score_ABS <- as.integer(df_items$correct)\n\n#cleanup\nrm(orth_pn, orth_p, orth_qn, orth_q, orth_ps, orth_qs,  tri_pn, tri_p, tri_qn, tri_q, tri_ps, tri_qs, qu, cond, r,x)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntest <- df_items %>% filter(q<6) %>% filter(condition == 111)\n\ngf_histogram(~score_TRI, data = test)\n```\n\n::: {.cell-output-display}\n![](2_sgc3A_scoring_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_histogram(~score_ORTH, data = test)\n```\n\n::: {.cell-output-display}\n![](2_sgc3A_scoring_files/figure-html/unnamed-chunk-19-2.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_histogram(~score_ABS, data = test)\n```\n\n::: {.cell-output-display}\n![](2_sgc3A_scoring_files/figure-html/unnamed-chunk-19-3.png){width=672}\n:::\n:::\n\n## EXPLORE RESPONSES\n\nIn this section we explore responses given by participants to each particular item in the graph comprehension task, and indicate how each response was scored, and what *interpretation of the graph* is indicated.\n\n### Control Condition\n\n::: {.cell}\n\n```{.r .cell-code}\ntitle = \"Answer Key for Control Condition Scaffold Phase (Q1 - Q5\"\ncols = c(\"Q\",\"Relation\",\"Text\",\"selected\",\"allow\",\"selected\",\"also\",\"Ignore\")\nkeys_raw %>% filter(condition == 111) %>% mutate(\n  IGNORE = replace_na(ALSO, \"\"),\n  t_ignore = replace_na(TRIve, \"\"),\n  o_ignore = replace_na(ORTHve, \"\")\n  ) %>% select(Q, RELATION, TEXT,TRIANGULAR, t_ignore, ORTHOGONAL, o_ignore, IGNORE) %>% \n  kbl(caption = title, col.names = cols) %>% kable_classic() %>%\n  add_header_above(c(\" \" = 3, \"Triangular\" = 2, \"Orthogonal\" = 2, \" \"=1))\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;'>\n<caption>Answer Key for Control Condition Scaffold Phase (Q1 - Q5</caption>\n <thead>\n<tr>\n<th style=\"empty-cells: hide;\" colspan=\"3\"></th>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"2\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Triangular</div></th>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"2\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Orthogonal</div></th>\n<th style=\"empty-cells: hide;\" colspan=\"1\"></th>\n</tr>\n  <tr>\n   <th style=\"text-align:right;\"> Q </th>\n   <th style=\"text-align:left;\"> Relation </th>\n   <th style=\"text-align:left;\"> Text </th>\n   <th style=\"text-align:left;\"> selected </th>\n   <th style=\"text-align:left;\"> allow </th>\n   <th style=\"text-align:left;\"> selected </th>\n   <th style=\"text-align:left;\"> also </th>\n   <th style=\"text-align:left;\"> Ignore </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> starttime </td>\n   <td style=\"text-align:left;\"> Which shift(s) start at 11 am? </td>\n   <td style=\"text-align:left;\"> F </td>\n   <td style=\"text-align:left;\"> Z </td>\n   <td style=\"text-align:left;\"> A </td>\n   <td style=\"text-align:left;\"> OI </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:left;\"> starts </td>\n   <td style=\"text-align:left;\"> Which shift(s) start at the same time as D? </td>\n   <td style=\"text-align:left;\"> K </td>\n   <td style=\"text-align:left;\"> Z </td>\n   <td style=\"text-align:left;\"> E </td>\n   <td style=\"text-align:left;\"> G </td>\n   <td style=\"text-align:left;\"> D </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> meets </td>\n   <td style=\"text-align:left;\"> Which shift(s) begin when C ends? </td>\n   <td style=\"text-align:left;\"> F </td>\n   <td style=\"text-align:left;\"> Z </td>\n   <td style=\"text-align:left;\"> Z </td>\n   <td style=\"text-align:left;\"> FIO </td>\n   <td style=\"text-align:left;\"> C </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:left;\"> endtime </td>\n   <td style=\"text-align:left;\"> Which shift(s) end at 4 pm? </td>\n   <td style=\"text-align:left;\"> H </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> U </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5 </td>\n   <td style=\"text-align:left;\"> midpoint </td>\n   <td style=\"text-align:left;\"> Coffee breaks happen halfway through a shift. Which shift(s) share a break with I? </td>\n   <td style=\"text-align:left;\"> O </td>\n   <td style=\"text-align:left;\"> AZ </td>\n   <td style=\"text-align:left;\"> U </td>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:left;\"> I </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n### TESTING OF ALTERNATIVE \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nf_partialC <- function(ps,p,qs,q,gs,g) {\n\n  #penalty_q = penalty for selecting an incorrect option\n  #penalty_g = penalty for selecting an irrelevant option\n  \n  #ps = number of correct-selected options\n  #p = number of true options\n  \n  #qs = number of incorrect-selected options\n  #q = number of false options\n  \n  \n  #gs = number of irrelevantly selected options\n  #g = number of irrelevant options\n  \n  \n  #n = number of options + p + q\n  return( (ps/p) - (qs/q) - (gs/g) )\n}\n```\n:::\n\n\n#### Question #1\n\nWe start by exploring the range of response options checked by participants on Question 1, for those assigned to the control (non-impasse) condition (`condition` = 111).\n\nIn the 'interpretation' column we indicate which interpretation of the graph stimulus is indicated by each combination of response options. Note that ALL CAPS indicates the precise interpretation, while lowercase indicates a partially-consistent selection of options.\n\n::: {.cell}\n\n```{.r .cell-code}\n#define interpretation for each response\n#NOTE: this is manually defined, based on inspecting answer options\n  interpretation = c(\"ORTHOGONAL\",\"TRIANGULAR\",\"lines-connect\",\"(both ortho & tri)\",\"?\",\"?\",\"?\")\n\ntitle <- \"Frequency of Selected Response Options for Question #1 (Control Condition)\"\ndf_items %>% filter(q == 1 & condition == 111) %>% group_by(response) %>% \n  dplyr::summarise( count = n(), absolute = unique(score_ABS), triangular = unique(score_TRI), orthogonal =  unique(score_ORTH)) %>% arrange(-count) %>% cbind(interpretation) %>% \n  arrange(desc(interpretation)) %>% \n  select(response, count, interpretation, absolute, triangular, orthogonal) %>% \n  kbl(caption = title) %>%  kable_classic() %>% \n  add_header_above(c(\" \" = 3, \"Scores\" = 3)) %>% \n  pack_rows(\"Triangular\", 1, 1) %>% \n  pack_rows(\"Orthongal\", 2, 2) %>% \n  pack_rows(\"Lines-Connect\", 3, 3) %>% \n  pack_rows(\"other\", 4, 7) \n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;'>\n<caption>Frequency of Selected Response Options for Question #1 (Control Condition)</caption>\n <thead>\n<tr>\n<th style=\"empty-cells: hide;\" colspan=\"3\"></th>\n<th style=\"padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; \" colspan=\"3\"><div style=\"border-bottom: 1px solid #111111; margin-bottom: -1px; \">Scores</div></th>\n</tr>\n  <tr>\n   <th style=\"text-align:left;\"> response </th>\n   <th style=\"text-align:right;\"> count </th>\n   <th style=\"text-align:left;\"> interpretation </th>\n   <th style=\"text-align:right;\"> absolute </th>\n   <th style=\"text-align:right;\"> triangular </th>\n   <th style=\"text-align:right;\"> orthogonal </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"1\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Triangular</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> F </td>\n   <td style=\"text-align:right;\"> 22 </td>\n   <td style=\"text-align:left;\"> TRIANGULAR </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n  </tr>\n  <tr grouplength=\"1\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Orthongal</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A </td>\n   <td style=\"text-align:right;\"> 129 </td>\n   <td style=\"text-align:left;\"> ORTHOGONAL </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.077 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n  </tr>\n  <tr grouplength=\"1\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Lines-Connect</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> CF </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:left;\"> lines-connect </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.923 </td>\n   <td style=\"text-align:right;\"> -0.167 </td>\n  </tr>\n  <tr grouplength=\"4\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>other</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> AF </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> (both ortho &amp; tri) </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.923 </td>\n   <td style=\"text-align:right;\"> 0.917 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> IJD </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> ? </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.231 </td>\n   <td style=\"text-align:right;\"> -0.167 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> X </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> ? </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.077 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> Z </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:left;\"> ? </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\nNearly all of the subjects selected a response consistent with one of the identified interpretations (indicated in all caps).\n\n*Note that options highlighted in light grey are considered within the range of 'visual error'.*\n\n+----------------------------------------------------------------+-------------------------------------------------------------------------------------+\n| Which shifts start at 11am?                                    |                                                                                     |\n+================================================================+=====================================================================================+\n| ![](keys/control/interpretations/Q1_111_TRI.png){width=\"297\"}  | **Response: F**                                                                     |\n|                                                                |                                                                                     |\n|                                                                | -   TRI_score = 1                                                                   |\n|                                                                |                                                                                     |\n|                                                                | -   ORTH_score = -0.083                                                             |\n|                                                                |                                                                                     |\n|                                                                | -   indicates the **triangular** (correct) interpretation of the coordinate system  |\n+----------------------------------------------------------------+-------------------------------------------------------------------------------------+\n| ![](keys/control/interpretations/Q1_111_ORTH.png){width=\"254\"} | **Response: A**                                                                     |\n|                                                                |                                                                                     |\n|                                                                | -   indicates an **orthogonal** (incorrect) interpretation of the coordinate system |\n+----------------------------------------------------------------+-------------------------------------------------------------------------------------+\n\nA number of alternative responses were given:\n\n+--------------------------------------------------------------+---------------------------------------------------------------+-------------------------------------------------------------+-------------------------------------------------------------+\n| Alternate Responses                                          |                                                               |                                                             |                                                             |\n+==============================================================+===============================================================+=============================================================+=============================================================+\n| ![](keys/control/interpretations/Q1_111_AF.png){width=\"200\"} | ![](keys/control/interpretations/Q1_111_IJD.png){width=\"200\"} | ![](keys/control/interpretations/Q1_111_Z.png){width=\"200\"} | ![](keys/control/interpretations/Q1_111_X.png){width=\"200\"} |\n+--------------------------------------------------------------+---------------------------------------------------------------+-------------------------------------------------------------+-------------------------------------------------------------+\n|                                                              |                                                               |                                                             |                                                             |\n+--------------------------------------------------------------+---------------------------------------------------------------+-------------------------------------------------------------+-------------------------------------------------------------+\n\n#### Question #2\n\n::: {.cell}\n\n```{.r .cell-code}\n#define interpretation for each response\n#NOTE: this is manually defined, based on inspecting answer options\n  interpretation = c(\"ORTHOGONAL\",\"TRIANGULAR\",\"LINES-CONNECT\",\"ORTHONGAL\",\n                     \"LINES-CONNECT\",\"\",\"\",\"(reference point)\",\"ortho + satisfice\",\"TRIANGULAR\")\n\ntitle <- \"Frequency of Selected Response Options for Question #2 (Control Condition)\"\ndf_items %>% filter(q == 2 & condition == 111) %>% group_by(response) %>% \n  dplyr::summarise( count = n(), absolute = unique(score_ABS), triangular = unique(score_TRI), orthogonal = unique(score_ORTH)) %>% arrange(-count) %>% cbind(interpretation) %>% \n  arrange(desc(interpretation)) %>% \n  kbl(caption = title) %>%  kable_classic() %>% \n  pack_rows(\"Triangular\", 1, 2) %>% \n  pack_rows(\"Orthogonal\", 3, 5) %>% \n  pack_rows(\"Lines-Connect\", 6, 7) %>% \n  pack_rows(\"other\", 8, 10) \n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;'>\n<caption>Frequency of Selected Response Options for Question #2 (Control Condition)</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> response </th>\n   <th style=\"text-align:right;\"> count </th>\n   <th style=\"text-align:right;\"> absolute </th>\n   <th style=\"text-align:right;\"> triangular </th>\n   <th style=\"text-align:right;\"> orthogonal </th>\n   <th style=\"text-align:left;\"> interpretation </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"2\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Triangular</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> K </td>\n   <td style=\"text-align:right;\"> 24 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:left;\"> TRIANGULAR </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> KD </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:left;\"> TRIANGULAR </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Orthogonal</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> DE </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:left;\"> ORTHONGAL </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> E </td>\n   <td style=\"text-align:right;\"> 121 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:left;\"> ORTHOGONAL </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> EG </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.167 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:left;\"> ortho + satisfice </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Lines-Connect</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> J </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:left;\"> LINES-CONNECT </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> AK </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.917 </td>\n   <td style=\"text-align:right;\"> -0.167 </td>\n   <td style=\"text-align:left;\"> LINES-CONNECT </td>\n  </tr>\n  <tr grouplength=\"3\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>other</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> D </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:left;\"> (reference point) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> B </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> C </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\nAgain, we see that most subjects selected a response consistent with one of the identified interpretations. (note, when the question stem includes a data point rather than time as reference, we do not penalize respondents for selecting the reference data point *in addition* to an interpretation consistent response. For example, in this question, we do not penalize respondents for selecting option D, the reference point in the question. )\n\n+---------------------------------------------------+-------------------------------------------------------------------------------------+\n| Which shift(s) start at the same time as D?       |                                                                                     |\n+===================================================+=====================================================================================+\n| ![](keys/control/interpretations/Q2_111_TRI.png)  | A correct (triangular) interpretation of the coordinate system yields data point K. |\n+---------------------------------------------------+-------------------------------------------------------------------------------------+\n| ![](keys/control/interpretations/Q2_111_ORTH.png) | An incorrect orthogonal interpretation yields point K                               |\n+---------------------------------------------------+-------------------------------------------------------------------------------------+\n\n+------------------------------------------------+-------------------------------------------------+------------------------------------------------+------------------------------------------------+\n| Alternative Responses                          |                                                 |                                                |                                                |\n+================================================+=================================================+================================================+================================================+\n| ![](keys/control/interpretations/Q2_111_J.png) | ![](keys/control/interpretations/Q2_111_AK.png) | ![](keys/control/interpretations/Q1_111_B.png) | ![](keys/control/interpretations/Q2_111_C.png) |\n+------------------------------------------------+-------------------------------------------------+------------------------------------------------+------------------------------------------------+\n|                                                |                                                 |                                                |                                                |\n+------------------------------------------------+-------------------------------------------------+------------------------------------------------+------------------------------------------------+\n\n#### Question #3\n\n::: {.cell}\n\n```{.r .cell-code}\n#define interpretation for each response\n#NOTE: this is manually defined, based on inspecting answer options\n  interpretation = c(\"ORTHOGONAL\",\"TRIANGULAR\",\"LINES-CONNECT\",\"ORTHONGAL\",\"LINES-CONNECT\",\n                     \"lines-connect\",\"LINES-CONNECT\",\"\",\"\",\"(reference point)\",\n                     \"\",\"\",\"\",\"\",\"\",\"\",\"\")\n\ntitle <- \"Frequency of Selected Response Options for Question #3 (Control Condition)\"\ndf_items %>% filter(q == 3 & condition == 111) %>% group_by(response) %>% \n  dplyr::summarise( count = n(), absolute = unique(score_ABS), triangular = unique(score_TRI), orthogonal = unique(score_ORTH)) %>% arrange(-count) %>% cbind(interpretation) %>% \n  arrange(desc(interpretation)) %>% \n  kbl(caption = title) %>%  kable_classic() %>% \n  pack_rows(\"Triangular\", 1, 1) %>% \n  pack_rows(\"Orthogonal\", 2, 3) %>% \n  pack_rows(\"Lines-Connect\", 4, 7) %>% \n  pack_rows(\"other\", 8, 17) \n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-classic\" style='font-family: \"Arial Narrow\", \"Source Sans Pro\", sans-serif; margin-left: auto; margin-right: auto;'>\n<caption>Frequency of Selected Response Options for Question #3 (Control Condition)</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> response </th>\n   <th style=\"text-align:right;\"> count </th>\n   <th style=\"text-align:right;\"> absolute </th>\n   <th style=\"text-align:right;\"> triangular </th>\n   <th style=\"text-align:right;\"> orthogonal </th>\n   <th style=\"text-align:left;\"> interpretation </th>\n  </tr>\n </thead>\n<tbody>\n  <tr grouplength=\"1\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Triangular</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> F </td>\n   <td style=\"text-align:right;\"> 24 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1.000 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> TRIANGULAR </td>\n  </tr>\n  <tr grouplength=\"2\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Orthogonal</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> AUB </td>\n   <td style=\"text-align:right;\"> 4 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.250 </td>\n   <td style=\"text-align:right;\"> -0.3 </td>\n   <td style=\"text-align:left;\"> ORTHONGAL </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> Z </td>\n   <td style=\"text-align:right;\"> 94 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:left;\"> ORTHOGONAL </td>\n  </tr>\n  <tr grouplength=\"4\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>Lines-Connect</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> A </td>\n   <td style=\"text-align:right;\"> 18 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> -0.1 </td>\n   <td style=\"text-align:left;\"> LINES-CONNECT </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> K </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> -0.1 </td>\n   <td style=\"text-align:left;\"> LINES-CONNECT </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> OJ </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.167 </td>\n   <td style=\"text-align:right;\"> -0.1 </td>\n   <td style=\"text-align:left;\"> LINES-CONNECT </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> O </td>\n   <td style=\"text-align:right;\"> 3 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> lines-connect </td>\n  </tr>\n  <tr grouplength=\"10\"><td colspan=\"6\" style=\"border-bottom: 0;\"><strong>other</strong></td></tr>\n<tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> C </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\"> (reference point) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> AH </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.167 </td>\n   <td style=\"text-align:right;\"> -0.2 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> AIOZFHJXKUDEGB </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.000 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> DE </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.167 </td>\n   <td style=\"text-align:right;\"> -0.2 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> E </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> -0.1 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> FKE </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.833 </td>\n   <td style=\"text-align:right;\"> -0.2 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> OJD </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.250 </td>\n   <td style=\"text-align:right;\"> -0.2 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> OK </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.167 </td>\n   <td style=\"text-align:right;\"> -0.1 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> U </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.083 </td>\n   <td style=\"text-align:right;\"> -0.1 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left; padding-left:  2em;\" indentlevel=\"1\"> UE </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> -0.167 </td>\n   <td style=\"text-align:right;\"> -0.2 </td>\n   <td style=\"text-align:left;\">  </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+\n|                                                                                     |                                                                                                                                                                       |                                                                                                                                             |\n+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+\n| Correct --- Triangular                                                              | Incorrect --- Lines Connect                                                                                                                                           | Incorrect --- Orthogonal                                                                                                                    |\n+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+\n| ![](keys/control/interpretations/Q3_111_TRI.png)                                    | ![](keys/control/interpretations/Q3_111_TVERSKY.png)                                                                                                                  | ![](keys/control/interpretations/Q3_111_ORTH.png)                                                                                           |\n+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+\n| A correct (triangular) interpretation of the coordinate system yields data point K. | An incorrect interpretation that is not orthogonal yields selection of datapoints that are connected by a line to data point D, such as K and A, or alternatively, J. | An incorrect orthogonal interpretation involves selecting data point E, the orthogonal projection from the reference point D to the x-axis. |\n+-------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------+\n\n### Summarize By subject\n\n::: {.cell}\n\n```{.r .cell-code}\ndf_items$DISC <- df_items$score_TRI - df_items$score_ORTH\ngf_jitter(score_TRI ~ score_ORTH, data = df_items, alpha = 0.2)\n```\n\n::: {.cell-output-display}\n![](2_sgc3A_scoring_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_jitter(score_TRI ~ DISC, data = df_items , alpha=0.2,  color = ~q)\n```\n\n::: {.cell-output-display}\n![](2_sgc3A_scoring_files/figure-html/unnamed-chunk-25-2.png){width=672}\n:::\n\n```{.r .cell-code}\ngf_dhistogram(~df_items$DISC, data = df_items)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning: Use of `df_items$DISC` is discouraged. Use `DISC` instead.\n```\n:::\n\n::: {.cell-output-display}\n![](2_sgc3A_scoring_files/figure-html/unnamed-chunk-25-3.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsubject_scores <- df_items %>% group_by(subject) %>% dplyr::summarize(\n  TRI = sum(score_TRI),\n  ORTH = sum(score_ORTH),\n  DISCRIM = sum(score_TRI + score_ORTH),\n  ABSOLUTE = sum(correct),\n  condition = unique(condition)\n)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` ungrouping output (override with `.groups` argument)\n```\n:::\n\n```{.r .cell-code}\nhead(subject_scores)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 x 6\n  subject    TRI  ORTH DISCRIM ABSOLUTE condition\n  <fct>    <dbl> <dbl>   <dbl>    <int> <fct>    \n1 04YXZ    0.356 1.40     1.76        0 111      \n2 0F1A8   -0.323 3.92     3.60        0 111      \n3 194UU   -0.573 3.7      3.13        0 111      \n4 19SNU   -0.323 5        4.68        0 111      \n5 1ZY3L    4.92  0.685    5.61        4 111      \n6 2BBZ9   -0.323 5        4.68        0 111      \n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# gf_dhistogram(~DISCRIM, data = subject_scores)  %>%  gf_facet_grid(~condition)\n# \n# gf_dhistogram(~ABSOLUTE, data = subject_scores)\n# \n# gf_jitter(ABSOLUTE ~ DISCRIM, data = subject_scores, alpha = 0.2)\n```\n:::\n\nTODO TRAPDOOR?\n\nSET T = options that result in -1 score (trapdoor)\n\nTODO: TEST first with NO trapdoor, and see what the scores yield, then if the responses can be scaled based on comparing subscores\n\nf_partialP \\<- function(t,p,f,q) {\n\nt = number of correct-selected options p = number of true options f = number of incorrect-selected options q = number of false options n = number of options + p + q return( (t / p) - (f/q)) }\n\nTo prepare for partial scoring \\[-1/q, + 1/p\\], we first need to define the parameters t, p , f, q\n\nOur approach to calculating an ORTHOGONAL PARTIAL score is as follows:\n\n-   1/p for each correct-selected\n\n-   -1/q for each incorrect-selected (except 'allowed' based on reference point and visual error)\n\n-   trapdoor : default to -1 if select triangular\n\n::: {.cell}\n\n```{.r .cell-code}\ntest <- data.frame(\n  response = c(\"A\",\"ABC\")\n)\n```\n:::\n\n## ",
    "supporting": [
      "2_sgc3A_scoring_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}