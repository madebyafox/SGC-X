<!DOCTYPE html>
<meta charset="utf-8">
<head>
 </head>

<body>
  <div class = "stimulus">
    <p class = "userid" id="userid"></p>
    <div id="answer" style="display:none"></div> <!--hidden response element-->

    <div class = "userinput">

      

      <!--  IMAGE SCAFFOLDS AND HINTS  ------------------------------------------------------------------>
      <div class = "legend" id="hint-interactive" style="display:none" >
        <p>Hint: Hover your mouse over the data points in the graph</p>
      </div> <!-- end legend -->

      <!-- STIMULUS QUESTIONS  ---------------------------------------------------------------------->
      <div class="test">
        
        <div class = "acme" id="" style ="display:none">
          <p class = "question" id="question"></p>
          <ul class="checkbox-grid">
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="C" value=C />C
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="A" value=A />A
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="I" value=I />I
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="O" value=O />O
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="Z" value=Z />Z
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="F" value=F />F
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="H" value=H />H
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="J" value=J />J
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="X" value=X />X
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="K" value=K />K
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="U" value=U />U
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="D" value=D />D
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="E" value=E />E
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="G" value=G />G
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="B" value=B />B
              <div class="control_indicator" ></div>
            </li>
          </ul>
        </div>
        
        <div class = "bigset" id="" style ="display:none">
          <p class = "question">Which shift(s) are six hours long?</p>
          <ul class="checkbox-grid">
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="I" value=I />I
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="J" value=J />J
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="E" value=E />E
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="F" value=F />F
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="B" value=B />B
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="M" value=M />M
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="A" value=A />A
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="G" value=G />G
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="C" value=C />C
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="K" value=K />K
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="X" value=X />X
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="O" value=O />O
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="P" value=P />P
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="L" value=L />L
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="H" value=H />H
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="Z" value=Z />Z
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="N" value=N />N
              <div class="control_indicator" ></div>
            </li>
            <li class="control"><label class="control control-checkbox">
              <input type="checkbox" name="D" value=D />D
              <div class="control_indicator" ></div>
            </li>
          </ul>
         
        </div>
     
        <div class = "strategy" id="" style ="display:none">
          <p class = "question"></p>
          
        </div>

      </div> <!--test questions div end-->

      <!-- SUBMIT AND HELP BUTTONS ------------------------------------------------------------------>
      <div class="fixbottom">  
        <button type="button" id="testingButton" class='btn' onclick=checkTriangularAnswer()>SUBMIT</button>
        <button type="button" id="strategyButton" style="display:none;"class='btn' onclick=submitStrategy()>SUBMIT</button>
      </div>
    </div> <!-- instructions -->
    <div class = "d3container"></div>
  </div> <!--stimulus container-->

  <script>


    //DECLARE VARIABLES ——————————————————————————
    var selectColor = "#3ea5ed";
    var clicked = ["answer","clicked"]; //populate first row of clicked array with headers
    var hovered = ""; //string for sequence of data points that have been hovered over
    var clicks = 0; //number of clicks on the page
    var mousesvg = []; //hold mouse movement in svg coord

    // Track clicks on page
    $(document).ready(function() {
      $(".control").click(function(e) {
        e.stopImmediatePropagation();
        clicks = clicks + 1;
        // console.log("clicks: "+clicks);
      });
    });

    // console.log("start of clicked array: "+clicked);
    // console.log("start of hovered string: "+hovered);

    //set correct answers for each question
    var triangular_answers = {
      "acme.starttime.1" : ["F"],
      "acme.starts.1" : ["K"],
      "acme.meets.1" : ["F"],
      "acme.endtime.1" : ["H"],
      "acme.midpoint.1" : ["O"],

      "acme.starttime.2" : ["F"],
      "acme.starts.2" : ["K"],
      "acme.meets.2" : ["F"],
      "acme.endtime.2" : ["H"],
      "acme.midpoint.2" : ["A"],

      "bigset.duration.1" : ["E","G"],
      "bigset.duration+starts.1" : ["X","O"],
      "bigset.duration+contained.1" : ["G"],
      "bigset.starttime+before+endtime+during.1": ["I"],
      "bigset.ends.1" : ["E"],

      "bigset.duration.2" : ["E","G"],
      "bigset.duration+starts.2" : ["X","O"],
      "bigset.duration+contained.2" : ["G"],
      "bigset.starttime+before+endtime+during.2":["I"],
      "bigset.ends.2" : ["E"],

      "bigset.starttime.1" : ["M","L"],
      "bigset.starts.1" : ["G"],
      "bigset.meets.1" : ["E","F"],
      "bigset.endtime.1" : ["X"],
      "bigset.midpoint.1" : ["K","X"],

      "bigset.starttime.2" : ["M","L"],
      "bigset.starts.2" : ["G"],
      "bigset.meets.2" : ["E","F"],
      "bigset.endtime.2" : ["X"],
      "bigset.midpoint.2" : ["K","X"]
    }
    var orthogonal_answers = {
      "acme.starttime.1" : ["A"],
      "acme.starts.1" : ["E"],
      "acme.meets.1" : ["Z"],
      "acme.endtime.1" : ["U"],
      "acme.midpoint.1" : ["U"],

      "acme.starttime.2" : ["0"],
      "acme.starts.2" : ["0"],
      "acme.meets.2" : ["0"],
      "acme.endtime.2" : ["0"],
      "acme.midpoint.2" : ["0"],

      "bigset.duration.1" : ["E","G"],
      "bigset.duration+starts.1" : ["F","B"],
      "bigset.duration+contained.1" : ["E"],
      "bigset.starttime+before+endtime+during.1": ["I"],
      "bigset.ends.1" : ["X"],

      "bigset.duration.2" : ["E","G"],
      "bigset.duration+starts.2" : ["F","B"],
      "bigset.duration+contained.2" : ["E"],
      "bigset.starttime+before+endtime+during.2":["I"],
      "bigset.ends.2" : ["X"],

      "bigset.starttime.1" : ["F","B"],
      "bigset.starts.1" : ["B"],
      "bigset.meets.1" : ["F","X"],
      "bigset.endtime.1" : ["B"],
      "bigset.midpoint.1" : ["E","F"],

      "bigset.starttime.2" : ["F","B"],
      "bigset.starts.2" : ["B"],
      "bigset.meets.2" : ["F","X"],
      "bigset.endtime.2" : ["B"],
      "bigset.midpoint.2" : ["E","F"]
    }

    var sid = localStorage.getItem("sid");
    var question = localStorage.getItem("question");
    var scenario = localStorage.getItem("scenario");
    var graph = localStorage.getItem("graph"); 
    var impasse = localStorage.getItem("impasse");    
    var explicit = localStorage.getItem("explicit");
    var axis = localStorage.getItem("axis");
    var datafile = "src/data/"+localStorage.getItem("datafile");
    var colorClick = localStorage.getItem("colorClick");
    
    
    console.log("DISPLAYING DATASET: "+ datafile)

    //display userid in bottom corner
    $('.userid').html(sid);

    //DISPLAY APPROPRIATE QUESTION
    $('.'+scenario).attr("style","display:block");
    $('.question').html(question);

    //display the question and answer buttons based on input values from experiment.js
    // document.getElementById(scenario+"."+question).style.display = "block";
    // if (question == "strategy") {document.getElementById("strategyButton").style.display = "block";}
    // else {document.getElementById("testingButton").style.display = "block";}

    //---------SET PROPERTIES OF THE GRAPH -------------//
    // set the dimensions and margins of the graph
    var margin = {top: 25, right: 30, bottom: 90, left: 100},
      width = 700,
      height = 700;
    var intersects = false; //default value for intersects scaffold
    var xAxisTitle, yAxisTitle;
  

    // //---------CREATE THE SVG  ------------------------//
    var svg = d3.select(".d3container").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform",  "translate(" + margin.left + "," + margin.top + ")")
      .on('mousemove', function() {
          // console.log( d3.mouse(this));
          mousesvg.push(d3.mouse(this));
      }); // log the mouse x,y position in svg coords
    
      //---------DRAW THE GRAPH  ------------------------//
    switch(graph){
      case "triangular":
        xAxisTitle = "START & END TIME (time of day)";
        yAxisTitle = "DURATION (in hours)";
        console.log("passing scaffold: "+explicit);
        drawTriangleModel(datafile,axis,explicit);
      break;
      
      case "linear":
        xAxisTitle = "START & END TIME (time of day)";
        if (scenario =="longmire"){yAxisTitle = "CONFERENCE ROOM";}
        if (scenario =="axis"){yAxisTitle = "TASK"}
        drawLinearModel(datafile,axis,explicit);
      break;
      
      default:
      $(".d3container").remove();
      break;
    }

    // if (q >= 6) { //turn off scaffolds
      if (explicit == 0) { //turn off scaffolds
      console.log("TURNING OFF SCAFFOLDS");
      $("#hint-interactive").css("display","none");
      $(".leaders").css("display","none");
      $(".static-scaffold").css("display","none");
    }
  </script>

</body>


<script>

//MOUSE LOGGING SCRIPT
var mouseLog = []
var xwidth = $(document).width();
var xheight = $(document).width();
mouseLog.push("{x:"+xwidth+",y:"+xheight+",t:"+"0};")

document.onmousemove = function(e){
  var pageCoords = "{x:" + e.pageX + ",y:"+ e.pageY +",t:"+ Date.now()+ "};" ;
  mouseLog.push(pageCoords);
  // console.log(pageCoords);
};

</script>
